{"mappings":"iiBAAAA,EAAA,SCAA,IAAMC,EAAO,CACXC,cAAeC,SAASC,cAAc,gBACtCC,eAAgBF,SAASC,cAAc,wBACvCE,OAAQH,SAASC,cAAc,2BAMjC,SAASG,IACPN,EAAKK,OAAOE,UAAUC,OAAO,Y,CAG/B,SAASC,EAASC,GAChBR,SAASS,gBAAgBC,aAAa,aAAcF,GACpDG,aAAaC,QAAQ,QAASJ,GAEPR,SAASa,iBAC9B,yCAEaC,SAAQ,SAAUC,GAE7BA,EAAaC,QADD,SAAVR,C,IAfRV,EAAKC,cAAckB,iBAAiB,QAASb,GAC7CN,EAAKI,eAAee,iBAAiB,QAASb,GAsB9C,IAAMc,EAAeP,aAAaQ,QAAQ,SAGxCZ,EADEW,GAGO,SAGYlB,SAASa,iBAC9B,yCAEaC,SAAQ,SAAUC,GAC/BA,EAAaE,iBACX,UACA,SAAUG,GACJA,EAAEC,OAAOL,QACXT,EAAS,QAETA,EAAS,Q,IAGb,E,IClDJ,IAAAe,EAAAzB,EAAA,SAEM0B,EAAWvB,SAASC,cAAc,iBACpCuB,EAAWC,IAWf,SAASA,IACP,IAAMC,EAAcC,OAAOC,WAE3B,OAAIF,GAAe,KACV,EACEA,GAAe,IACjB,EACEA,GAAe,IACjB,OADkB,C,CAK7B,SAASG,EAAaC,GA2BpB,OA1BsBA,EAAKC,KAAI,SAAAC,GAC7B,IAaMC,EAbcD,EAAIE,MAAMC,MAAM,EAAGX,GACPO,KAAI,SAAAK,GAClC,MAAO,4DAGiCC,OAFWD,EAAKE,IAAI,mFAKzBD,OAHKD,EAAKG,WAAW,gHAIpBF,OADDD,EAAKI,MAAM,mDACEH,OAAZD,EAAKK,OAAO,0B,IAIZC,KAAK,IAC3C,MAAO,2FAGKL,OAFmCL,EAAIW,UAAU,uEAKEN,OAHnDJ,EAAkB,0IAG+CI,OAAdL,EAAIW,UAAU,gE,IAI7CD,KAAK,G,EA/CzC,EAAApB,EAAAsB,eAAcC,MAAK,SAAUC,GAE3BvB,EAASwB,UAAYlB,EAAaiB,GAClCnB,OAAOV,iBAAiB,UAAU,WAChCO,EAAWC,IACXF,EAASwB,UAAYlB,EAAaiB,E,kBCVtCxB,EAAAzB,EAAA,aAEMmD,EAAOhD,SAASC,cAAc,YAC9BgD,EAAgBjD,SAASC,cAAc,4BACvCiD,EAAelD,SAASC,cAAc,oBACtCkD,EAAWnD,SAASC,cAAc,iBAClCmD,EAAgBpD,SAASC,cAAc,uBA0D7C,SAASoD,EAAcC,GARvB,IACQC,EACAC,EACAC,EAFAF,EAQMD,EARYI,MAAM,KACxBF,EAAWD,EAAUA,EAAUI,OAAS,GACxCF,EAAaF,EAAUpB,MAAM,EAAGoB,EAAUI,OAAS,GAAGjB,KAAK,KAAO,IAExEO,EAAcF,UAAY,oCAAkFV,OAA9CoB,EAAW,qCAA4CpB,OAATmB,EAAS,iBAMrH,EAAAlC,EAAAsC,mBAAkBN,GAAUT,MAAK,SAAAgB,GAC/Bb,EAAKD,UAAuBc,EA9B3B9B,KACC,SAAA+B,G,IAAGvB,EAAUuB,EAAVvB,WAAYC,EAAKsB,EAALtB,MAAOC,EAAMqB,EAANrB,OAAQH,EAAGwB,EAAHxB,I,MAC5B,+CAGgBD,OAH+BC,EAAI,2FAGfD,OAApBE,EAAW,WAIOF,OAJEG,EAAM,mIAKRH,OADAG,EAAM,mDACCH,OAAPI,EAAO,oD,IAK5CC,KAAK,G,IA7CVQ,EAAajC,iBAAiB,SAavB,SAAiC8C,GACtC,GAC0B,MAAxBA,EAAI1C,OAAO2C,UACgB,iBAA3BD,EAAI1C,OAAO4C,YAEX,OAEFF,EAAIG,iBAEJd,EAAca,YAAc,GAC5Bd,EAASJ,UAAY,GAErBM,EAAcU,EAAI1C,OAAO4C,Y,IAxB3Bd,EAASlC,iBAAiB,SAE1B,SAAwB8C,GACtB,GAA6B,wBAAzBA,EAAI1C,OAAO8C,UACb,OAEAf,EAAca,YAAc,GAC5Bd,EAASJ,UAAY,GACrBM,EAAcU,EAAI1C,OAAO+C,QAAQd,S,ICjBrC,IAAAe,EAAAxE,EAAA,S,aACMyE,G,aAAetE,SAASC,cAAc,qB,SAU7BsE,I,OAAAA,EAAfC,EAAAH,EAAA,CAAAG,EAAAC,GAAAC,MAAA,SAAAC,I,IACQC,EACAC,EACDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAQvC,EAGPwC,E,mFALsB,EAAA7D,EAAA8D,mBAAkB,iB,OAE9C,IAFMR,EAAYS,EAAAC,KACZT,EAAc,GACfC,GAAmB,EAAnBC,GAAmB,EAAnBC,OAAmBO,E,SAAnBN,EAAuBL,EAAYY,OAAAC,cAAnCX,GAAAI,EAAAD,EAAmBS,QAAAC,MAAnBb,GAAmB,EAAbnC,EAANuC,EAAmBU,MAAXjD,UACXkC,EAAYgB,KAAKlD,G,gDADdoC,GAAmB,EAAnBC,EAAmBK,EAAAS,G,4BAAnBhB,GAAmB,MAAnBG,EAAmBc,QAAnBd,EAAmBc,S,sBAAnBhB,EAAmB,C,sBAAnBC,E,gEAGCG,EAASN,EACZmB,MAAK,SAACC,EAAGC,G,OAAMD,EAAEE,cAAcD,E,IAC/BnE,KACC,SAAAqE,G,MACE,8EAAmF/D,OAAL+D,EAAK,Y,IAEtF1D,KAAK,IACR4B,EAAa+B,mBAAmB,YAAalB,G,4EAbXmB,MAAAC,KAAAC,U,CALlClC,EAAa+B,mBAAmB,aAD9B,8G,WAMW9B,EAAqB+B,MAAAC,KAAAC,U,CAgBpCC,GC3BApC,EAAAxE,EAAA,S,0BAAA,IAEM6G,EAAkB1G,SAASC,cAAc,mBACzC0G,EAAmB3G,SAASC,cAAc,oBAC1C2G,EAAa5G,SAASC,cAAc,YACpC4G,EAAmB7G,SAASC,cAAc,iB,SAKjC6G,EAAYC,G,OAAZC,EAAWV,MAAAC,KAAAC,U,UAAXQ,I,OAAAA,EAAfxC,EAAAH,EAAA,CAAAG,EAAAC,GAAAC,MAAA,SAAAC,EAA2BoC,G,IAKrBE,E,yEAJJF,EAAM7C,iBAMF6C,EAAM1F,OAAO6F,QAAQ,kBAAkBC,KACzCF,EAASF,EAAM1F,OAAO6F,QAAQ,kBAAkBC,I,mBAKzB,EAAA7F,EAAA8F,aAAYH,G,OACnCI,EADchC,EAAAC,M,kDAGdgC,QAAQC,IAAGlC,EAAAS,I,2DAhBWQ,MAAAC,KAAAC,U,CAoB1B,SAASa,EAAkBvD,G,IAAEvB,EAAFuB,EAAEvB,WAAYC,EAAdsB,EAActB,MAAOgF,EAArB1D,EAAqB0D,YAAalF,EAAlCwB,EAAkCxB,IACrD6C,EAEG,qNAY0B9C,OAN1BE,EAAW,kJAQbF,OAF4BG,EAAM,qDAOwBH,OAL1DmF,EAAY,uIAKkDnF,OAAJC,EAAI,sEAMrEqE,EAAiBN,mBAAmB,YAAalB,GAEjD,IAAMsC,EAAO,CACXC,cAAe1H,SAASC,cAAc,sBACtC0H,KAAM3H,SAASC,cAAc,SAS/B,SAAS2H,IACPjG,OAAOkG,oBAAoB,UAAWC,GACtCL,EAAKE,KAAKI,MAAMC,SAAW,GAC3BtB,EAAgBrG,UAAU4H,OAAO,UACjCR,EAAKC,cAAcG,oBAAoB,QAASD,GAChDlB,EAAgBmB,oBAAoB,QAASK,GAC7CvB,EAAiB5D,UAAY,E,CAG/B,SAASmF,EAA0BnB,GAC7BA,EAAM1F,SAAW0F,EAAMoB,eACzBP,G,CAIJ,SAASE,EAAuBf,GACN,WAEpBA,EAAMqB,MACRR,G,CAzBJlB,EAAgBrG,UAAUC,OAAO,UACjCmH,EAAKC,cAAczG,iBAAiB,QAAS2G,GAC7ClB,EAAgBzF,iBAAiB,QAASiH,GAC1CvG,OAAOV,iBAAiB,UAAW6G,GACnCL,EAAKE,KAAKI,MAAMC,SAAW,Q,CA9D7BpB,EAAW3F,iBAAiB,QAAS6F,GACrCD,EAAiB5F,iBAAiB,QAAS6F,G","sources":["src/index.js","src/js/header.js","src/js/all-categories-list.js","src/js/books-list.js","src/js/markup-list-category.js","src/js/modal-popup.js"],"sourcesContent":["import '../src/js/main-fetch';\nimport '../src/js/header';\nimport '../src/js/all-categories-list';\nimport '../src/js/support-bar';\nimport '../src/js/books-list';\nimport '../src/js/markup-list-category';\nimport '../src/js/modal-popup';\nimport '../src/js/shopping-list';\n// import '../src/js/theme-switcher';\n\n","const refs = {\n  openBurgerBtn: document.querySelector('.burger-menu'),\n  closeBurgerBtn: document.querySelector('.mobile-menu__button'),\n  burger: document.querySelector('.mobile-menu-container'),\n};\n\nrefs.openBurgerBtn.addEventListener('click', toggleModal);\nrefs.closeBurgerBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  refs.burger.classList.toggle('is-hidden');\n}\n// Toggler\nfunction setTheme(theme) {\n  document.documentElement.setAttribute('data-theme', theme);\n  localStorage.setItem('theme', theme);\n\n  const toggleSwitches = document.querySelectorAll(\n    '.common-toggle input[type=\"checkbox\"]'\n  );\n  toggleSwitches.forEach(function (toggleSwitch) {\n    if (theme === 'dark') {\n      toggleSwitch.checked = true;\n    } else {\n      toggleSwitch.checked = false;\n    }\n  });\n}\n\nconst currentTheme = localStorage.getItem('theme');\n\nif (currentTheme) {\n  setTheme(currentTheme);\n} else {\n  setTheme('light');\n}\n\nconst toggleSwitches = document.querySelectorAll(\n  '.common-toggle input[type=\"checkbox\"]'\n);\ntoggleSwitches.forEach(function (toggleSwitch) {\n  toggleSwitch.addEventListener(\n    'change',\n    function (e) {\n      if (e.target.checked) {\n        setTheme('dark');\n      } else {\n        setTheme('light');\n      }\n    },\n    false\n  );\n});\n","import { getTopBooks } from './main-fetch';\n\nconst allBooks = document.querySelector('.best-sellers');\nlet bookSize = getBookSize();\n\ngetTopBooks().then(function (response) {\n  // console.log('top book', response);\n  allBooks.innerHTML = renderMarkup(response);\n  window.addEventListener('resize', function () {\n    bookSize = getBookSize();\n    allBooks.innerHTML = renderMarkup(response);\n  });\n});\n\nfunction getBookSize() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth >= 1440) {\n    return 5; // Великий розмір книжки\n  } else if (screenWidth >= 768) {\n    return 3; // Середній розмір книжки\n  } else if (screenWidth >= 375) {\n    return 1; // Малий розмір книжки\n  }\n}\n\nfunction renderMarkup(data) {\n  const renderedItems = data.map(obj => {\n    const slicedBooks = obj.books.slice(0, bookSize); // Обрізання кількості книг\n    const innerMarkup = slicedBooks.map(book => {\n      return `\n      <li class=\"best-sellers__item js-modal-item\" id=\"${book._id}\">\n      <div class=\"card-wrap\">\n        <img class=\"best-sellers__img\" src=\"${book.book_image}\" alt=\"\" />\n        <p class=\"card\">quick view</p>\n        </div>\n        <h3 class=\"best-sellers__name\">${book.title}</h3>\n        <p class=\"best-sellers__author\">${book.author}</p>\n      </li>\n    `;\n    });\n    const mergedInnerMarkup = innerMarkup.join('');\n    return `<div class=\"best-sellers__container\">\n              <p class=\"best-sellers__categori\"> ${obj.list_name}</p>\n              <ul class=\"best-sellers__list\">\n              ${mergedInnerMarkup}\n              </ul>\n              <div class=\"button-conteiner\">\n              <button class=\"best-sellers-button\" data-category=\"${obj.list_name}\">see more</button>\n              </div>\n            </div>`;\n  });\n  const finalMarkup = renderedItems.join('');\n  return finalMarkup;\n}\n","import { getBookByCategory } from './main-fetch';\n\nconst list = document.querySelector('.js-list');\nconst categoryTitle = document.querySelector('.js-category-books-title');\nconst listCategory = document.querySelector('.categories-list');\nconst allBooks = document.querySelector('.best-sellers');\nconst allBooksTitle = document.querySelector('.best-sellers-title');\n\nlistCategory.addEventListener('click', handlerAllCategoryBooks);\nallBooks.addEventListener('click', allBooksCklick);\n\nfunction allBooksCklick(evt) {\n  if (evt.target.className !== 'best-sellers-button') {\n    return;\n  } else {\n    allBooksTitle.textContent = '';\n    allBooks.innerHTML = '';\n    categoryBooks(evt.target.dataset.category);\n  }\n}\n\nexport function handlerAllCategoryBooks(evt) {\n  if (\n    evt.target.nodeName !== 'A' ||\n    evt.target.textContent === 'All category'\n  ) {\n    return;\n  }\n  evt.preventDefault();\n\n  allBooksTitle.textContent = '';\n  allBooks.innerHTML = '';\n\n  categoryBooks(evt.target.textContent);\n}\n\nfunction cardMarkup(array) {\n  return array\n    .map(\n      ({ book_image, title, author, _id }) =>\n        `<li class=\"category-item js-modal-item\" id=\"${_id}\">\n        <a href=\"\">\n          <div class=\"book-card-wrap\">\n            <img src=\"${book_image}\" alt=\"${title}\" />\n            <p class=\"card-up-text\">quick view</p>\n          </div>\n         \n            <h3 class=\"book-card-title\">${title}</h3>\n            <p class=\"book-card-author\">${author}</p>\n          </div>\n        </a>\n      </li>`\n    )\n    .join('');\n}\n\nfunction titleMarkup(title) {\n  const wordArray = title.split(' ');\n  const lastWord = wordArray[wordArray.length - 1];\n  const firstTitle = wordArray.slice(0, wordArray.length - 1).join(' ') + ' ';\n\n  categoryTitle.innerHTML = `<h2 class=\"category-title-begin\">${firstTitle}<span class=\"category-title-end\">${lastWord}</span></h2>`;\n}\n\nfunction categoryBooks(category) {\n  titleMarkup(category);\n\n  getBookByCategory(category).then(arr => {\n    list.innerHTML = cardMarkup(arr);\n  });\n}\n","import { getCategoriesList } from './main-fetch';\nconst listCategory = document.querySelector('.categories-list');\n\nfunction getMarkupAllCategory() {\n  const markup =\n    '<li><a href=\"./index.html\" class=\"js-categ-link category__link-all current-category\">All category</a></li>';\n  listCategory.insertAdjacentHTML('afterbegin', markup);\n}\n\ngetMarkupAllCategory();\n\nasync function getMarkupCategoryList() {\n  const categoryList = await  getCategoriesList('category-list');\n  const categoryArr = [];\n  for (const { list_name } of categoryList) {\n    categoryArr.push(list_name);\n  }\n  const markup = categoryArr\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      item =>\n        `<li class=\"category__item\"><a href=\"\" class=\"js-categ-link category__link\">${item}</a></li>`\n    )\n    .join('');\n  listCategory.insertAdjacentHTML('beforeend', markup);\n}\n\ngetMarkupCategoryList();\n\n\n","import { getBookById } from './main-fetch';\n\nconst modalBackdropEl = document.querySelector('.modal-backdrop');\nconst modalContainerEl = document.querySelector('.modal-container');\nconst bookListEl = document.querySelector('.js-list');\nconst allBooksCategory = document.querySelector('.best-sellers');\n\nbookListEl.addEventListener('click', onOpenModal);\nallBooksCategory.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  event.preventDefault();\n\n\n  // if (event.target.nodeName !== 'IMG') return;\n  let bookId;\n\n  if (event.target.closest('.js-modal-item').id) {\n    bookId = event.target.closest('.js-modal-item').id;\n   \n  } \n\n  try {\n    const bookData = await getBookById(bookId);\n    createMarkupModal(bookData);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createMarkupModal({ book_image, title, description, _id }) {\n  const markup = mark();\n  function mark() {\n    return ` \n    <div class=\"modal-content\"> \n    <div class=\"book-card__modal\" data-modal>\n   <button class=\"book-card__close modal-book__btn\" data-modal-close>X</button>\n  <img\n    class=\"book-card__img\"\n    src=\"${book_image}\"\n    width=\"375px\"\n    height=\"468px\"\n    alt=\"book__img\"\n  />\n      <div class=\"book-card__about\">\n      <h3 class=\"book-card__title\">${title}</h3>\n      <p class=\"book-card__desc\">\n       ${description}\n      </p>\n    </div>\n  </div>\n  <ul class=\"book-add__btn\">\n        <li><button class=\"book-add__watched modal-book__btn\" id=${_id}>add to Watched</button></li>\n      </ul>\n   </div>           \n`;\n  }\n\n  modalContainerEl.insertAdjacentHTML('beforeend', markup);\n\n  const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    body: document.querySelector('body'),\n  };\n\n  modalBackdropEl.classList.toggle('active');\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n  modalBackdropEl.addEventListener('click', onClickBackdropModalClose);\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.body.style.overflow = 'hidden';\n\n  function onCloseModal() {\n    window.removeEventListener('keydown', inKeyDownEscModalClose);\n    refs.body.style.overflow = '';\n    modalBackdropEl.classList.remove('active');\n    refs.closeModalBtn.removeEventListener('click', onCloseModal);\n    modalBackdropEl.removeEventListener('click', onClickBackdropModalClose);\n    modalContainerEl.innerHTML = '';\n  }\n\n  function onClickBackdropModalClose(event) {\n    if (event.target === event.currentTarget) {\n      onCloseModal();\n    }\n  }\n\n  function inKeyDownEscModalClose(event) {\n    const KEY_CODE_ESCAPE = 'Escape';\n\n    if (event.code === KEY_CODE_ESCAPE) {\n      onCloseModal();\n    }\n  }\n}\n"],"names":["parcelRequire","$d35165bd5db5382a$var$refs","openBurgerBtn","document","querySelector","closeBurgerBtn","burger","$d35165bd5db5382a$var$toggleModal","classList","toggle","$d35165bd5db5382a$var$setTheme","theme","documentElement","setAttribute","localStorage","setItem","querySelectorAll","forEach","toggleSwitch","checked","addEventListener","$d35165bd5db5382a$var$currentTheme","getItem","e","target","$f3isR","$19b91d21d740de34$var$allBooks","$19b91d21d740de34$var$bookSize","$19b91d21d740de34$var$getBookSize","screenWidth","window","innerWidth","$19b91d21d740de34$var$renderMarkup","data","map","obj","mergedInnerMarkup","books","slice","book","concat","_id","book_image","title","author","join","list_name","getTopBooks","then","response","innerHTML","$a606689b60ea9abf$var$list","$a606689b60ea9abf$var$categoryTitle","$a606689b60ea9abf$var$listCategory","$a606689b60ea9abf$var$allBooks","$a606689b60ea9abf$var$allBooksTitle","$a606689b60ea9abf$var$categoryBooks","category","wordArray","lastWord","firstTitle","split","length","getBookByCategory","arr","param","evt","nodeName","textContent","preventDefault","className","dataset","$bpxeT","$fec153486447e91a$var$listCategory","$fec153486447e91a$var$_getMarkupCategoryList","$parcel$interopDefault","$2TvXO","mark","_callee","categoryList","categoryArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","markup","getCategoriesList","_ctx","sent","undefined","Symbol","iterator","next","done","value","push","t0","return","sort","a","b","localeCompare","item","insertAdjacentHTML","apply","this","arguments","$fec153486447e91a$var$getMarkupCategoryList","$d3e58e7b09fc8c9b$var$modalBackdropEl","$d3e58e7b09fc8c9b$var$modalContainerEl","$d3e58e7b09fc8c9b$var$bookListEl","$d3e58e7b09fc8c9b$var$allBooksCategory","$d3e58e7b09fc8c9b$var$onOpenModal","event","$d3e58e7b09fc8c9b$var$_onOpenModal","bookId","closest","id","getBookById","$d3e58e7b09fc8c9b$var$createMarkupModal","console","log","description","refs","closeModalBtn","body","onCloseModal","removeEventListener","inKeyDownEscModalClose","style","overflow","remove","onClickBackdropModalClose","currentTarget","code"],"version":3,"file":"index.fbd0de9b.js.map"}