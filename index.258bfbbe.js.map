{"mappings":"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","sources":["src/index.js","src/js/header.js","src/js/all-categories-list.js","src/js/books-list.js","src/js/markup-list-category.js","src/js/modal-popup.js","src/js/theme-switcher.js"],"sourcesContent":["import '../src/js/main-fetch';\nimport '../src/js/header';\nimport '../src/js/all-categories-list';\nimport '../src/js/support-bar';\nimport '../src/js/books-list';\nimport '../src/js/markup-list-category';\nimport '../src/js/modal-popup';\n// import '../src/js/shopping-list';\nimport '../src/js/theme-switcher';\n\n","const refs = {\n  openBurgerBtn: document.querySelector('.burger-menu'),\n  closeBurgerBtn: document.querySelector('.mobile-menu__button'),\n  burger: document.querySelector('.mobile-menu-container'),\n};\n\nrefs.openBurgerBtn.addEventListener('click', toggleModal);\nrefs.closeBurgerBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  refs.burger.classList.toggle('is-hidden');\n}\n// Toggler\nfunction setTheme(theme) {\n  document.documentElement.setAttribute('data-theme', theme);\n  localStorage.setItem('theme', theme);\n\n  const toggleSwitches = document.querySelectorAll(\n    '.common-toggle input[type=\"checkbox\"]'\n  );\n  toggleSwitches.forEach(function (toggleSwitch) {\n    if (theme === 'dark') {\n      toggleSwitch.checked = true;\n    } else {\n      toggleSwitch.checked = false;\n    }\n  });\n}\n\nconst currentTheme = localStorage.getItem('theme');\n\nif (currentTheme) {\n  setTheme(currentTheme);\n} else {\n  setTheme('light');\n}\n\nconst toggleSwitches = document.querySelectorAll(\n  '.common-toggle input[type=\"checkbox\"]'\n);\ntoggleSwitches.forEach(function (toggleSwitch) {\n  toggleSwitch.addEventListener(\n    'change',\n    function (e) {\n      if (e.target.checked) {\n        setTheme('dark');\n      } else {\n        setTheme('light');\n      }\n    },\n    false\n  );\n});\n","import { getTopBooks } from './main-fetch';\n\nconst allBooks = document.querySelector('.best-sellers');\nlet bookSize = getBookSize();\n\ngetTopBooks().then(function (response) {\n  // console.log('top book', response);\n  allBooks.innerHTML = renderMarkup(response);\n  window.addEventListener('resize', function () {\n    bookSize = getBookSize();\n    allBooks.innerHTML = renderMarkup(response);\n  });\n});\n\nfunction getBookSize() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth >= 1440) {\n    return 5; // Великий розмір книжки\n  } else if (screenWidth >= 768) {\n    return 3; // Середній розмір книжки\n  } else if (screenWidth >= 375) {\n    return 1; // Малий розмір книжки\n  }\n}\n\nfunction renderMarkup(data) {\n  const renderedItems = data.map(obj => {\n    const slicedBooks = obj.books.slice(0, bookSize); // Обрізання кількості книг\n    const innerMarkup = slicedBooks.map(book => {\n      return `\n      <li class=\"best-sellers__item js-modal-item\" id=\"${book._id}\">\n      <div class=\"card-wrap\">\n        <img class=\"best-sellers__img\" src=\"${book.book_image}\" alt=\"\" />\n        <p class=\"card\">quick view</p>\n        </div>\n        <h3 class=\"best-sellers__name\">${book.title}</h3>\n        <p class=\"best-sellers__author\">${book.author}</p>\n      </li>\n    `;\n    });\n    const mergedInnerMarkup = innerMarkup.join('');\n    return `<div class=\"best-sellers__container\">\n              <p class=\"best-sellers__categori\"> ${obj.list_name}</p>\n              <ul class=\"best-sellers__list\">\n              ${mergedInnerMarkup}\n              </ul>\n              <div class=\"button-conteiner\">\n              <button class=\"best-sellers-button\" data-category=\"${obj.list_name}\">see more</button>\n              </div>\n            </div>`;\n  });\n  const finalMarkup = renderedItems.join('');\n  return finalMarkup;\n}\n","import { getBookByCategory } from './main-fetch';\n\nconst list = document.querySelector('.js-list');\nconst categoryTitle = document.querySelector('.js-category-books-title');\nconst listCategory = document.querySelector('.categories-list');\nconst allBooks = document.querySelector('.best-sellers');\nconst allBooksTitle = document.querySelector('.best-sellers-title');\n\nlistCategory.addEventListener('click', handlerAllCategoryBooks);\nallBooks.addEventListener('click', allBooksCklick);\n\nfunction allBooksCklick(evt) {\n  if (evt.target.className !== 'best-sellers-button') {\n    return;\n  } else {\n    allBooksTitle.textContent = '';\n    allBooks.innerHTML = '';\n    categoryBooks(evt.target.dataset.category);\n  }\n}\n\nexport function handlerAllCategoryBooks(evt) {\n  if (\n    evt.target.nodeName !== 'A' ||\n    evt.target.textContent === 'All category'\n  ) {\n    return;\n  }\n  evt.preventDefault();\n\n  allBooksTitle.textContent = '';\n  allBooks.innerHTML = '';\n\n  categoryBooks(evt.target.textContent);\n}\n\nfunction cardMarkup(array) {\n  return array\n    .map(\n      ({ book_image, title, author, _id }) =>\n        `<li class=\"category-item js-modal-item\" id=\"${_id}\">\n        <a href=\"\">\n          <div class=\"book-card-wrap\">\n            <img src=\"${book_image}\" alt=\"${title}\" />\n            <p class=\"card-up-text\">quick view</p>\n          </div>\n         \n            <h3 class=\"book-card-title\">${title}</h3>\n            <p class=\"book-card-author\">${author}</p>\n          </div>\n        </a>\n      </li>`\n    )\n    .join('');\n}\n\nfunction titleMarkup(title) {\n  const wordArray = title.split(' ');\n  const lastWord = wordArray[wordArray.length - 1];\n  const firstTitle = wordArray.slice(0, wordArray.length - 1).join(' ') + ' ';\n\n  categoryTitle.innerHTML = `<h2 class=\"category-title-begin\">${firstTitle}<span class=\"category-title-end\">${lastWord}</span></h2>`;\n}\n\nfunction categoryBooks(category) {\n  titleMarkup(category);\n\n  getBookByCategory(category).then(arr => {\n    list.innerHTML = cardMarkup(arr);\n  });\n}\n","import { getCategoriesList } from './main-fetch';\nconst listCategory = document.querySelector('.categories-list');\n\nfunction getMarkupAllCategory() {\n  const markup =\n    '<li><a href=\"./index.html\" class=\"js-categ-link category__link-all current-category\">All category</a></li>';\n  listCategory.insertAdjacentHTML('afterbegin', markup);\n}\n\ngetMarkupAllCategory();\n\nasync function getMarkupCategoryList() {\n  const categoryList = await  getCategoriesList('category-list');\n  const categoryArr = [];\n  for (const { list_name } of categoryList) {\n    categoryArr.push(list_name);\n  }\n  const markup = categoryArr\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      item =>\n        `<li class=\"category__item\"><a href=\"\" class=\"js-categ-link category__link\">${item}</a></li>`\n    )\n    .join('');\n  listCategory.insertAdjacentHTML('beforeend', markup);\n}\n\ngetMarkupCategoryList();\n\n\n","import { getBookById } from './main-fetch';\n\nconst modalBackdropEl = document.querySelector('.modal-backdrop');\nconst modalContainerEl = document.querySelector('.modal-container');\nconst bookListEl = document.querySelector('.js-list');\nconst allBooksCategory = document.querySelector('.best-sellers');\n\nbookListEl.addEventListener('click', onOpenModal);\nallBooksCategory.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  event.preventDefault();\n\n  // if (event.target.nodeName !== 'IMG') return;\n  let bookId;\n\n  if (event.target.closest('.js-modal-item').id) {\n    bookId = event.target.closest('.js-modal-item').id;\n  }\n\n  try {\n    const bookData = await getBookById(bookId);\n\n    console.log(bookData);\n\n    createMarkupModal(bookData);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createMarkupModal({ book_image, title, author, description, _id }) {\n  if (description === '') {\n    description = 'No description';\n  }\n\n  const markup = mark();\n  function mark() {\n    return ` \n    <div class=\"modal-content\"> \n    <div class=\"book-card__modal\" data-modal>\n   <button class=\"book-card__close modal-book__btn\" data-modal-close>X</button>\n  <img\n    class=\"book-card__img\"\n    src=\"${book_image}\"\n\n    alt=\"book__img\"\n  />\n      <div class=\"book-card__about\">\n      <h3 class=\"book-card__title\">${title}</h3>\n      <p class=\"book-card__author\">${author}</p>\n      <p class=\"book-card__desc\">\n       ${description}\n      </p>\n    </div>\n  </div>\n\n  <button class=\"book-add__watched modal-book__btn\" id=${_id}>Add to shopping list</button>\n      \n   </div>           \n`;\n  }\n\n  modalContainerEl.insertAdjacentHTML('beforeend', markup);\n\n  const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    body: document.querySelector('body'),\n  };\n\n  modalBackdropEl.classList.toggle('active');\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n  modalBackdropEl.addEventListener('click', onClickBackdropModalClose);\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.body.style.overflow = 'hidden';\n\n  function onCloseModal() {\n    window.removeEventListener('keydown', inKeyDownEscModalClose);\n    refs.body.style.overflow = '';\n    modalBackdropEl.classList.remove('active');\n    refs.closeModalBtn.removeEventListener('click', onCloseModal);\n    modalBackdropEl.removeEventListener('click', onClickBackdropModalClose);\n    modalContainerEl.innerHTML = '';\n  }\n\n  function onClickBackdropModalClose(event) {\n    if (event.target === event.currentTarget) {\n      onCloseModal();\n    }\n  }\n\n  function inKeyDownEscModalClose(event) {\n    const KEY_CODE_ESCAPE = 'Escape';\n\n    if (event.code === KEY_CODE_ESCAPE) {\n      onCloseModal();\n    }\n  }\n}\n","let changeThemeButtons = document.querySelectorAll('.changeTheme');\nconst check = document.querySelector('.toggle-theme');\nconst body = document.querySelector('body');\nconsole.log(body);\n\nchangeThemeButtons.forEach(button => {\n  button.addEventListener('click', function () {\n    let theme = this.dataset.theme;\n    applyTheme(theme);\n  });\n});\n\nfunction applyTheme(themeName) {\n  changeThemeButtons.forEach(button => {\n    button.style.display = 'block';\n  });\n\n  localStorage.setItem('theme', themeName);\n}\n\nlet activeTheme = localStorage.getItem('theme');\n\nif (activeTheme === null || activeTheme === 'light') {\n  applyTheme('light');\n} else if (activeTheme === 'dark') {\n  applyTheme('dark');\n}\n\ncheck.addEventListener('click', onStyle);\n\nfunction onStyle(evt) {\n    const currentTheme = localStorage.getItem('theme')\n    console.log(currentTheme);\n    console.log(evt);\n    \n    if (currentTheme === null || currentTheme === 'light') {\n        body.classList.add('global-dark-theme');\n    } else if (currentTheme === 'dark') {\n      body.classList.remove('global-dark-theme');\n    }\n}\n"],"names":["parcelRequire","$8aad853c076397e7$var$refs","openBurgerBtn","document","querySelector","closeBurgerBtn","burger","$8aad853c076397e7$var$toggleModal","classList","toggle","$8aad853c076397e7$var$setTheme","theme","documentElement","setAttribute","localStorage","setItem","querySelectorAll","forEach","toggleSwitch","checked","addEventListener","$8aad853c076397e7$var$currentTheme","getItem","e","target","$615fE","$e3f4d87703a0ba46$var$allBooks","$e3f4d87703a0ba46$var$bookSize","$e3f4d87703a0ba46$var$getBookSize","screenWidth","window","innerWidth","$e3f4d87703a0ba46$var$renderMarkup","data","map","obj","mergedInnerMarkup","books","slice","book","_id","book_image","title","author","join","list_name","getTopBooks","then","response","innerHTML","$d5fa13485dd33184$var$list","$d5fa13485dd33184$var$categoryTitle","$d5fa13485dd33184$var$listCategory","$d5fa13485dd33184$var$allBooks","$d5fa13485dd33184$var$allBooksTitle","$d5fa13485dd33184$var$categoryBooks","category","wordArray","split","lastWord","length","firstTitle","$d5fa13485dd33184$var$titleMarkup","getBookByCategory","arr","evt","nodeName","textContent","preventDefault","className","dataset","$9ab3057244f938b0$var$listCategory","insertAdjacentHTML","async","categoryList","getCategoriesList","categoryArr","push","markup","sort","a","b","localeCompare","item","$9ab3057244f938b0$var$getMarkupCategoryList","$ba113c1c013b7caa$var$modalBackdropEl","$ba113c1c013b7caa$var$modalContainerEl","$ba113c1c013b7caa$var$bookListEl","$ba113c1c013b7caa$var$allBooksCategory","$ba113c1c013b7caa$var$onOpenModal","event","bookId","closest","id","bookData","getBookById","console","log","description","mark","refs","closeModalBtn","body","onCloseModal","removeEventListener","inKeyDownEscModalClose","style","overflow","remove","onClickBackdropModalClose","currentTarget","KEY_CODE_ESCAPE","code","$ba113c1c013b7caa$var$createMarkupModal","error","$8547458e5800e4ee$var$changeThemeButtons","$8547458e5800e4ee$var$check","$8547458e5800e4ee$var$body","$8547458e5800e4ee$var$applyTheme","themeName","button","display","this","$8547458e5800e4ee$var$activeTheme","currentTheme","add"],"version":3,"file":"index.258bfbbe.js.map"}