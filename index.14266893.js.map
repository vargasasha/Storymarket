{"mappings":"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","sources":["src/index.js","src/js/header.js","src/js/books-list.js","src/js/markup-list-category.js","src/js/modal-popup.js","src/js/all-categories-list.js"],"sourcesContent":["import '../src/js/main-fetch';\nimport '../src/js/header';\nimport '../src/js/books-list';\nimport '../src/js/markup-list-category';\nimport '../src/js/modal-popup';\nimport '../src/js/all-categories-list';\nimport '../src/js/shopping-list';\nimport '../src/js/support-bar';\n// import '../src/js/theme-switcher';\n","const refs = {\n  openBurgerBtn: document.querySelector('.burger-menu'),\n  closeBurgerBtn: document.querySelector('.mobile-menu__button'),\n  burger: document.querySelector('.mobile-menu-container'),\n};\n\nrefs.openBurgerBtn.addEventListener('click', toggleModal);\nrefs.closeBurgerBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  refs.burger.classList.toggle('is-hidden');\n}\n// Toggler\nfunction setTheme(theme) {\n  document.documentElement.setAttribute('data-theme', theme);\n  localStorage.setItem('theme', theme);\n\n  const toggleSwitches = document.querySelectorAll(\n    '.common-toggle input[type=\"checkbox\"]'\n  );\n  toggleSwitches.forEach(function (toggleSwitch) {\n    if (theme === 'dark') {\n      toggleSwitch.checked = true;\n    } else {\n      toggleSwitch.checked = false;\n    }\n  });\n}\n\nconst currentTheme = localStorage.getItem('theme');\n\nif (currentTheme) {\n  setTheme(currentTheme);\n} else {\n  setTheme('light');\n}\n\nconst toggleSwitches = document.querySelectorAll(\n  '.common-toggle input[type=\"checkbox\"]'\n);\ntoggleSwitches.forEach(function (toggleSwitch) {\n  toggleSwitch.addEventListener(\n    'change',\n    function (e) {\n      if (e.target.checked) {\n        setTheme('dark');\n      } else {\n        setTheme('light');\n      }\n    },\n    false\n  );\n});\n","import { getBookByCategory } from './main-fetch';\n\nconst list = document.querySelector('.js-list');\nconst categoryTitle = document.querySelector('.js-category-books-title');\nconst listCategory = document.querySelector('.categories-list');\nconst allBooks = document.querySelector('.best-sellers');\nconst allBooksTitle = document.querySelector('.best-sellers-title');\n\nlistCategory.addEventListener('click', handlerAllCategoryBooks);\nallBooks.addEventListener('click', allBooksCklick);\n\nfunction allBooksCklick(evt) {\n  if (evt.target.className !== 'best-sellers-button') {\n    return;\n  } else {\n    allBooksTitle.textContent = '';\n    allBooks.innerHTML = '';\n    categoryBooks(evt.target.dataset.category);\n  }\n}\n\nexport function handlerAllCategoryBooks(evt) {\n  if (\n    evt.target.nodeName !== 'A' ||\n    evt.target.textContent === 'All category'\n  ) {\n    return;\n  }\n  evt.preventDefault();\n\n  allBooksTitle.textContent = '';\n  allBooks.innerHTML = '';\n\n  categoryBooks(evt.target.textContent);\n}\n\nfunction cardMarkup(array) {\n  return array\n    .map(\n      ({ book_image, title, author, _id }) =>\n        `<li class=\"category-item js-modal-item\" id=\"${_id}\">\n        <a href=\"\">\n          <div class=\"book-card-wrap\">\n            <img src=\"${book_image}\" alt=\"${title}\" />\n            <p class=\"card-up-text\">quick view</p>\n          </div>\n         \n            <h3 class=\"book-card-title\">${title}</h3>\n            <p class=\"book-card-author\">${author}</p>\n          </div>\n        </a>\n      </li>`\n    )\n    .join('');\n}\n\nfunction titleMarkup(title) {\n  const wordArray = title.split(' ');\n  const lastWord = wordArray[wordArray.length - 1];\n  const firstTitle = wordArray.slice(0, wordArray.length - 1).join(' ') + ' ';\n\n  categoryTitle.innerHTML = `<h2 class=\"category-title-begin\">${firstTitle}<span class=\"category-title-end\">${lastWord}</span></h2>`;\n}\n\nfunction categoryBooks(category) {\n  titleMarkup(category);\n\n  getBookByCategory(category).then(arr => {\n    list.innerHTML = cardMarkup(arr);\n  });\n}\n","import { getCategoriesList } from './main-fetch';\nconst listCategory = document.querySelector('.categories-list');\n\nfunction getMarkupAllCategory() {\n  const markup =\n    '<li><a href=\"./index.html\" class=\"js-categ-link category__link-all current-category\">All category</a></li>';\n  listCategory.insertAdjacentHTML('afterbegin', markup);\n}\n\ngetMarkupAllCategory();\n\nasync function getMarkupCategoryList() {\n  const categoryList = await  getCategoriesList('category-list');\n  const categoryArr = [];\n  for (const { list_name } of categoryList) {\n    categoryArr.push(list_name);\n  }\n  const markup = categoryArr\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      item =>\n        `<li class=\"category__item\"><a href=\"\" class=\"js-categ-link category__link\">${item}</a></li>`\n    )\n    .join('');\n  listCategory.insertAdjacentHTML('beforeend', markup);\n}\n\ngetMarkupCategoryList();\n\n\n","import { getBookById } from './main-fetch';\n\nconst modalBackdropEl = document.querySelector('.modal-backdrop');\nconst modalContainerEl = document.querySelector('.modal-container');\nconst bookListEl = document.querySelector('.js-list');\nconst allBooksCategory = document.querySelector('.best-sellers');\n\nbookListEl.addEventListener('click', onOpenModal);\nallBooksCategory.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  event.preventDefault();\n\n\n  // if (event.target.nodeName !== 'IMG') return;\n  let bookId;\n\n  if (event.target.closest('.js-modal-item').id) {\n    bookId = event.target.closest('.js-modal-item').id;\n   \n  } \n\n  try {\n    const bookData = await getBookById(bookId);\n    createMarkupModal(bookData);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createMarkupModal({ book_image, title, description, _id }) {\n  const markup = mark();\n  function mark() {\n    return `               \n<div class=\"book-card__modal\" data-modal>\n   <button class=\"book-card__close modal-book__btn\" data-modal-close>X</button>\n  <img\n    class=\"book-card__img\"\n    src=\"${book_image}\"\n    width=\"375px\"\n    height=\"468px\"\n    alt=\"book__img\"\n  />\n      <div class=\"book-card__about\">\n      <h3 class=\"book-card__title\">${title}</h3>\n      <p class=\"book-card__desc\">\n       ${description}\n      </p>\n      <ul class=\"book-add__btn\">\n        <li><button class=\"book-add__watched modal-book__btn\" id=${_id}>add to Watched</button></li>\n      </ul>\n    </div>\n  </div>\n  \n`;\n  }\n\n  modalContainerEl.insertAdjacentHTML('beforeend', markup);\n\n  const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    body: document.querySelector('body'),\n  };\n\n  modalBackdropEl.classList.toggle('active');\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n  modalBackdropEl.addEventListener('click', onClickBackdropModalClose);\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.body.style.overflow = 'hidden';\n\n  function onCloseModal() {\n    window.removeEventListener('keydown', inKeyDownEscModalClose);\n    refs.body.style.overflow = '';\n    modalBackdropEl.classList.remove('active');\n    refs.closeModalBtn.removeEventListener('click', onCloseModal);\n    modalBackdropEl.removeEventListener('click', onClickBackdropModalClose);\n    modalContainerEl.innerHTML = '';\n  }\n\n  function onClickBackdropModalClose(event) {\n    if (event.target === event.currentTarget) {\n      onCloseModal();\n    }\n  }\n\n  function inKeyDownEscModalClose(event) {\n    const KEY_CODE_ESCAPE = 'Escape';\n\n    if (event.code === KEY_CODE_ESCAPE) {\n      onCloseModal();\n    }\n  }\n}\n","import { getTopBooks } from './main-fetch';\n\nconst allBooks = document.querySelector('.best-sellers');\nlet bookSize = getBookSize();\n\ngetTopBooks().then(function (response) {\n  // console.log('top book', response);\n  allBooks.innerHTML = renderMarkup(response);\n});\n\nwindow.addEventListener('resize', function () {\n  bookSize = getBookSize();\n  allBooks.innerHTML = renderMarkup(response);\n});\n\nfunction getBookSize() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth >= 1440) {\n    return 5; // Великий розмір книжки\n  } else if (screenWidth >= 768) {\n    return 3; // Середній розмір книжки\n  } else if (screenWidth >= 375) {\n    return 1; // Малий розмір книжки\n  }\n}\n\nfunction renderMarkup(data) {\n  const renderedItems = data.map(obj => {\n    const slicedBooks = obj.books.slice(0, bookSize); // Обрізання кількості книг\n    const innerMarkup = slicedBooks.map(book => {\n      return `\n      <li class=\"best-sellers__item js-modal-item\" id=\"${book._id}\">\n        <img class=\"best-sellers__img\" src=\"${book.book_image}\" alt=\"\" />\n        <h3 class=\"best-sellers__name\">${book.title}</h3>\n        <p class=\"best-sellers__author\">${book.author}</p>\n      </li>\n    `;\n    });\n    const mergedInnerMarkup = innerMarkup.join('');\n    return `<div class=\"best-sellers__container\">\n              <p class=\"best-sellers__categori\"> ${obj.list_name}</p>\n              <ul class=\"best-sellers__list\">\n              ${mergedInnerMarkup}\n              </ul>\n              <div class=\"button-conteiner\">\n              <button class=\"best-sellers-button\" data-category=\"${obj.list_name}\">see more</button>\n              </div>\n            </div>`;\n  });\n  const finalMarkup = renderedItems.join('');\n  return finalMarkup;\n}\n"],"names":["parcelRequire","$d35165bd5db5382a$var$refs","openBurgerBtn","document","querySelector","closeBurgerBtn","burger","$d35165bd5db5382a$var$toggleModal","classList","toggle","$d35165bd5db5382a$var$setTheme","theme","documentElement","setAttribute","localStorage","setItem","querySelectorAll","forEach","toggleSwitch","checked","addEventListener","$d35165bd5db5382a$var$currentTheme","getItem","e","target","$f3isR","$a606689b60ea9abf$var$list","$a606689b60ea9abf$var$categoryTitle","$a606689b60ea9abf$var$listCategory","$a606689b60ea9abf$var$allBooks","$a606689b60ea9abf$var$allBooksTitle","$a606689b60ea9abf$var$categoryBooks","category","wordArray","lastWord","firstTitle","split","length","slice","join","innerHTML","concat","getBookByCategory","then","arr","map","param","book_image","title","author","_id","evt","nodeName","textContent","preventDefault","className","dataset","$bpxeT","$fec153486447e91a$var$listCategory","$fec153486447e91a$var$_getMarkupCategoryList","$parcel$interopDefault","$2TvXO","mark","_callee","categoryList","categoryArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","list_name","markup","getCategoriesList","_ctx","sent","undefined","Symbol","iterator","next","done","value","push","t0","return","sort","a","b","localeCompare","item","insertAdjacentHTML","apply","this","arguments","$fec153486447e91a$var$getMarkupCategoryList","$d3e58e7b09fc8c9b$var$modalBackdropEl","$d3e58e7b09fc8c9b$var$modalContainerEl","$d3e58e7b09fc8c9b$var$bookListEl","$d3e58e7b09fc8c9b$var$allBooksCategory","$d3e58e7b09fc8c9b$var$onOpenModal","event","$d3e58e7b09fc8c9b$var$_onOpenModal","bookId","closest","id","getBookById","$d3e58e7b09fc8c9b$var$createMarkupModal","console","log","description","refs","closeModalBtn","body","onCloseModal","window","removeEventListener","inKeyDownEscModalClose","style","overflow","remove","onClickBackdropModalClose","currentTarget","code","$19b91d21d740de34$var$allBooks","$19b91d21d740de34$var$bookSize","$19b91d21d740de34$var$getBookSize","screenWidth","innerWidth","$19b91d21d740de34$var$renderMarkup","data","obj","mergedInnerMarkup","books","book","getTopBooks","response"],"version":3,"file":"index.14266893.js.map"}