!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var c={id:e,exports:{}};return n[e]=c,t.call(c.exports,c,c.exports),c.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=c),c("f3isR");var r={openBurgerBtn:document.querySelector(".burger-menu"),closeBurgerBtn:document.querySelector(".mobile-menu__button"),burger:document.querySelector(".mobile-menu-container")};function a(){r.burger.classList.toggle("is-hidden")}function l(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),document.querySelectorAll('.common-toggle input[type="checkbox"]').forEach((function(t){t.checked="dark"===e}))}r.openBurgerBtn.addEventListener("click",a),r.closeBurgerBtn.addEventListener("click",a);var s=localStorage.getItem("theme");l(s||"light"),document.querySelectorAll('.common-toggle input[type="checkbox"]').forEach((function(e){e.addEventListener("change",(function(e){e.target.checked?l("dark"):l("light")}),!1)}));var i=c("f3isR"),d=document.querySelector(".best-sellers"),u=m();function m(){var e=window.innerWidth;return e>=1440?5:e>=768?3:e>=375?1:void 0}function g(e){return e.map((function(e){var t=e.books.slice(0,u).map((function(e){return'\n      <li class="best-sellers__item js-modal-item" id="'.concat(e._id,'">\n      <div class="card-wrap">\n        <img class="best-sellers__img" src="').concat(e.book_image,'" alt="" />\n        <p class="card">quick view</p>\n        </div>\n        <h3 class="best-sellers__name">').concat(e.title,'</h3>\n        <p class="best-sellers__author">').concat(e.author,"</p>\n      </li>\n    ")})).join("");return'<div class="best-sellers__container">\n              <p class="best-sellers__categori"> '.concat(e.list_name,'</p>\n              <ul class="best-sellers__list">\n              ').concat(t,'\n              </ul>\n              <div class="button-conteiner">\n              <button class="best-sellers-button" data-category="').concat(e.list_name,'">see more</button>\n              </div>\n            </div>')})).join("")}(0,i.getTopBooks)().then((function(e){d.innerHTML=g(e),window.addEventListener("resize",(function(){u=m(),d.innerHTML=g(e)}))})),c("h2DKL");i=c("f3isR");var f=document.querySelector(".js-list"),v=document.querySelector(".js-category-books-title"),b=document.querySelector(".categories-list"),p=document.querySelector(".best-sellers"),h=document.querySelector(".best-sellers-title");function k(e){var t,n,o;t=e.split(" "),n=t[t.length-1],o=t.slice(0,t.length-1).join(" ")+" ",v.innerHTML='<h2 class="category-title-begin">'.concat(o,'<span class="category-title-end">').concat(n,"</span></h2>"),(0,i.getBookByCategory)(e).then((function(e){f.innerHTML=e.map((function(e){var t=e.book_image,n=e.title,o=e.author,c=e._id;return'<li class="category-item js-modal-item" id="'.concat(c,'">\n        <a href="">\n          <div class="book-card-wrap">\n            <img src="').concat(t,'" alt="').concat(n,'" />\n            <p class="card-up-text">quick view</p>\n          </div>\n         \n            <h3 class="book-card-title">').concat(n,'</h3>\n            <p class="book-card-author">').concat(o,"</p>\n          </div>\n        </a>\n      </li>")})).join("")}))}b.addEventListener("click",(function(e){if("A"!==e.target.nodeName||"All category"===e.target.textContent)return;e.preventDefault(),h.textContent="",p.innerHTML="",k(e.target.textContent)})),p.addEventListener("click",(function(e){if("best-sellers-button"!==e.target.className)return;h.textContent="",p.innerHTML="",k(e.target.dataset.category)}));var y=c("bpxeT"),_=c("2TvXO"),L=(i=c("f3isR"),document.querySelector(".categories-list"));function w(){return(w=e(y)(e(_).mark((function t(){var n,o,c,r,a,l,s,d,u;return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getCategoriesList)("category-list");case 2:for(n=e.sent,o=[],c=!0,r=!1,a=void 0,e.prev=5,l=n[Symbol.iterator]();!(c=(s=l.next()).done);c=!0)d=s.value.list_name,o.push(d);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),r=!0,a=e.t0;case 13:e.prev=13,e.prev=14,c||null==l.return||l.return();case 16:if(e.prev=16,!r){e.next=19;break}throw a;case 19:return e.finish(16);case 20:return e.finish(13);case 21:u=o.sort((function(e,t){return e.localeCompare(t)})).map((function(e){return'<li class="category__item"><a href="" class="js-categ-link category__link">'.concat(e,"</a></li>")})).join(""),L.insertAdjacentHTML("beforeend",u);case 23:case"end":return e.stop()}}),t,null,[[5,9,13,21],[14,,16,20]])})))).apply(this,arguments)}L.insertAdjacentHTML("afterbegin",'<li><a href="./index.html" class="js-categ-link category__link-all current-category">All category</a></li>'),function(){w.apply(this,arguments)}();y=c("bpxeT"),_=c("2TvXO"),i=c("f3isR");var S=document.querySelector(".modal-backdrop"),q=document.querySelector(".modal-container"),E=document.querySelector(".js-list"),x=document.querySelector(".best-sellers");function T(e){return j.apply(this,arguments)}function j(){return(j=e(y)(e(_).mark((function t(n){var o,c;return e(_).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.target.closest(".js-modal-item").id&&(o=n.target.closest(".js-modal-item").id),e.prev=3,e.next=6,(0,i.getBookById)(o);case 6:c=e.sent,console.log(c),B(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function B(e){var t=e.book_image,n=e.title,o=e.author,c=e.description,r=e._id;""===c&&(c="No description");var a=' \n    <div class="modal-content"> \n    <div class="book-card__modal" data-modal>\n   <button class="book-card__close modal-book__btn" data-modal-close>X</button>\n  <img\n    class="book-card__img"\n    src="'.concat(t,'"\n\n    alt="book__img"\n  />\n      <div class="book-card__about">\n      <h3 class="book-card__title">').concat(n,'</h3>\n      <p class="book-card__author">').concat(o,'</p>\n      <p class="book-card__desc">\n       ').concat(c,'\n      </p>\n    </div>\n  </div>\n\n  <button class="book-add__watched modal-book__btn" id=').concat(r,">Add to shopping list</button>\n      \n   </div>           \n");q.insertAdjacentHTML("beforeend",a);var l={closeModalBtn:document.querySelector("[data-modal-close]"),body:document.querySelector("body")};function s(){window.removeEventListener("keydown",d),l.body.style.overflow="",S.classList.remove("active"),l.closeModalBtn.removeEventListener("click",s),S.removeEventListener("click",i),q.innerHTML=""}function i(e){e.target===e.currentTarget&&s()}function d(e){"Escape"===e.code&&s()}S.classList.toggle("active"),l.closeModalBtn.addEventListener("click",s),S.addEventListener("click",i),window.addEventListener("keydown",d),l.body.style.overflow="hidden"}E.addEventListener("click",T),x.addEventListener("click",T);var M=document.querySelectorAll(".changeTheme"),A=document.querySelector(".toggle-theme"),H=document.querySelector("body");function C(e){M.forEach((function(e){e.style.display="block"})),localStorage.setItem("theme",e)}console.log(H),M.forEach((function(e){e.addEventListener("click",(function(){C(this.dataset.theme)}))}));var R=localStorage.getItem("theme");null===R||"light"===R?C("light"):"dark"===R&&C("dark"),A.addEventListener("click",(function(e){var t=localStorage.getItem("theme");console.log(t),console.log(e),null===t||"light"===t?H.classList.add("global-dark-theme"):"dark"===t&&H.classList.remove("global-dark-theme")}))}();
//# sourceMappingURL=index.e616d0aa.js.map
