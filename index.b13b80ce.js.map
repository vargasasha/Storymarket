{"mappings":"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","sources":["src/index.js","src/js/header.js","src/js/books-list.js","src/js/markup-list-category.js","src/js/modal-popup.js","src/js/all-categories-list.js","src/js/theme-switcher.js"],"sourcesContent":["import '../src/js/main-fetch';\nimport '../src/js/header';\nimport '../src/js/books-list';\nimport '../src/js/markup-list-category';\nimport '../src/js/modal-popup';\nimport '../src/js/all-categories-list';\nimport '../src/js/theme-switcher';\nimport '../src/js/support-bar';\n\n","const refs = {\n  openBurgerBtn: document.querySelector('.burger-menu'),\n  closeBurgerBtn: document.querySelector('.mobile-menu__button'),\n  burger: document.querySelector('.mobile-menu-container'),\n};\n\nrefs.openBurgerBtn.addEventListener('click', toggleModal);\nrefs.closeBurgerBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  refs.burger.classList.toggle('is-hidden');\n}\n// Toggler\nfunction setTheme(theme) {\n  document.documentElement.setAttribute('data-theme', theme);\n  localStorage.setItem('theme', theme);\n\n  const toggleSwitches = document.querySelectorAll(\n    '.common-toggle input[type=\"checkbox\"]'\n  );\n  toggleSwitches.forEach(function (toggleSwitch) {\n    if (theme === 'dark') {\n      toggleSwitch.checked = true;\n    } else {\n      toggleSwitch.checked = false;\n    }\n  });\n}\n\nconst currentTheme = localStorage.getItem('theme');\n\nif (currentTheme) {\n  setTheme(currentTheme);\n} else {\n  setTheme('light');\n}\n\nconst toggleSwitches = document.querySelectorAll(\n  '.common-toggle input[type=\"checkbox\"]'\n);\ntoggleSwitches.forEach(function (toggleSwitch) {\n  toggleSwitch.addEventListener(\n    'change',\n    function (e) {\n      if (e.target.checked) {\n        setTheme('dark');\n      } else {\n        setTheme('light');\n      }\n    },\n    false\n  );\n});\n","import { getBookByCategory } from './main-fetch';\n\nconst list = document.querySelector('.js-list');\nconst categoryTitle = document.querySelector('.js-category-books-title');\nconst listCategory = document.querySelector('.categories-list');\nconst allBooks = document.querySelector('.best-sellers');\nconst allBooksTitle = document.querySelector('.best-sellers-title');\n\nlistCategory.addEventListener('click', handlerAllCategoryBooks);\nallBooks.addEventListener('click', allBooksCklick);\n\nfunction allBooksCklick(evt) {\n  if (evt.target.className !== 'best-sellers-button') {\n    return;\n  } else {\n    allBooksTitle.textContent = '';\n    allBooks.innerHTML = '';\n    categoryBooks(evt.target.dataset.category);\n  }\n}\n\nexport function handlerAllCategoryBooks(evt) {\n  if (\n    evt.target.nodeName !== 'A' ||\n    evt.target.textContent === 'All category'\n  ) {\n    return;\n  }\n  evt.preventDefault();\n\n  allBooksTitle.textContent = '';\n  allBooks.innerHTML = '';\n\n  categoryBooks(evt.target.textContent);\n}\n\nfunction cardMarkup(array) {\n  return array\n    .map(\n      ({ book_image, title, author, _id }) =>\n        `<li class=\"category-item\" id=\"${_id}\">\n        <a href=\"\">\n          <div class=\"book-card-wrap\">\n            <img src=\"${book_image}\" alt=\"${title}\" />\n            <p class=\"card-up-text\">quick view</p>\n          </div>\n         \n            <h3 class=\"book-card-title\">${title}</h3>\n            <p class=\"book-card-author\">${author}</p>\n          </div>\n        </a>\n      </li>`\n    )\n    .join('');\n}\n\nfunction titleMarkup(title) {\n  const wordArray = title.split(' ');\n  const lastWord = wordArray[wordArray.length - 1];\n  const firstTitle = wordArray.slice(0, wordArray.length - 1).join(' ') + ' ';\n\n  categoryTitle.innerHTML = `<h2 class=\"category-title-begin\">${firstTitle}<span class=\"category-title-end\">${lastWord}</span></h2>`;\n}\n\nfunction categoryBooks(category) {\n  titleMarkup(category);\n\n  getBookByCategory(category).then(arr => {\n    list.innerHTML = cardMarkup(arr);\n  });\n}\n","import { getCategoriesList } from './main-fetch';\nconst listCategory = document.querySelector('.categories-list');\n\nfunction getMarkupAllCategory() {\n  const markup =\n    '<li><a href=\"./index.html\" class=\"js-categ-link category__link-all current-category\">All category</a></li>';\n  listCategory.insertAdjacentHTML('afterbegin', markup);\n}\n\ngetMarkupAllCategory();\n\nasync function getMarkupCategoryList() {\n  const categoryList = await  getCategoriesList('category-list');\n  const categoryArr = [];\n  for (const { list_name } of categoryList) {\n    categoryArr.push(list_name);\n  }\n  const markup = categoryArr\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      item =>\n        `<li class=\"category__item\"><a href=\"\" class=\"js-categ-link category__link\">${item}</a></li>`\n    )\n    .join('');\n  listCategory.insertAdjacentHTML('beforeend', markup);\n}\n\ngetMarkupCategoryList();\n\n\n","import { getBookById } from './main-fetch';\n\nconst modalBackdropEl = document.querySelector('.modal-backdrop');\nconst modalContainerEl = document.querySelector('.modal-container');\nconst bookListEl = document.querySelector('.js-list');\n\nbookListEl.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  event.preventDefault();\n  // if (event.target.nodeName !== 'IMG') return;\n  const bookId = event.target.closest('.category-item').id;\n  try {\n    const bookData = await getBookById(bookId);\n    createMarkupModal(bookData);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createMarkupModal({ book_image, title, description, _id }) {\n  const markup = mark();\n  function mark() {\n    return `               \n<div class=\"book-card__modal\" data-modal>\n   <button class=\"book-card__close modal-book__btn\" data-modal-close>X</button>\n  <img\n    class=\"book-card__img\"\n    src=\"${book_image}\"\n    width=\"375px\"\n    height=\"468px\"\n    alt=\"book__img\"\n  />\n      <div class=\"book-card__about\">\n      <h3 class=\"book-card__title\">${title}</h3>\n      <p class=\"book-card__desc\">\n       ${description}\n      </p>\n      <ul class=\"book-add__btn\">\n        <li><button class=\"book-add__watched modal-book__btn\" id=${_id}>add to Watched</button></li>\n      </ul>\n    </div>\n  </div>\n  \n`;\n  }\n\n  modalContainerEl.insertAdjacentHTML('beforeend', markup);\n\n  const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    body: document.querySelector('body'),\n  };\n\n  modalBackdropEl.classList.toggle('active');\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n  modalBackdropEl.addEventListener('click', onClickBackdropModalClose);\n  window.addEventListener('keydown', inKeyDownEscModalClose);\n  refs.body.style.overflow = 'hidden';\n\n  function onCloseModal() {\n    window.removeEventListener('keydown', inKeyDownEscModalClose);\n    refs.body.style.overflow = '';\n    modalBackdropEl.classList.remove('active');\n    refs.closeModalBtn.removeEventListener('click', onCloseModal);\n    modalBackdropEl.removeEventListener('click', onClickBackdropModalClose);\n    modalContainerEl.innerHTML = '';\n  }\n\n  function onClickBackdropModalClose(event) {\n    if (event.target === event.currentTarget) {\n      onCloseModal();\n    }\n  }\n\n  function inKeyDownEscModalClose(event) {\n    const KEY_CODE_ESCAPE = 'Escape';\n\n    if (event.code === KEY_CODE_ESCAPE) {\n      onCloseModal();\n    }\n  }\n}\n","import { getTopBooks } from './main-fetch';\n\nconst allBooks = document.querySelector('.best-sellers');\nlet bookSize = getBookSize();\n\ngetTopBooks().then(function (response) {\n  // console.log('top book', response);\n  allBooks.innerHTML = renderMarkup(response);\n});\n\nwindow.addEventListener('resize', function () {\n  bookSize = getBookSize();\n  allBooks.innerHTML = renderMarkup(response);\n});\n\nfunction getBookSize() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth >= 1440) {\n    return 5; // Великий розмір книжки\n  } else if (screenWidth >= 768) {\n    return 3; // Середній розмір книжки\n  } else if (screenWidth >= 375) {\n    return 1; // Малий розмір книжки\n  }\n}\n\nfunction renderMarkup(data) {\n  const renderedItems = data.map(obj => {\n    const slicedBooks = obj.books.slice(0, bookSize); // Обрізання кількості книг\n    const innerMarkup = slicedBooks.map(book => {\n      return `\n      <li class=\"best-sellers__item\">\n        <img class=\"best-sellers__img\" src=\"${book.book_image}\" alt=\"\" />\n        <h3 class=\"best-sellers__name\">${book.title}</h3>\n        <p class=\"best-sellers__author\">${book.author}</p>\n      </li>\n    `;\n    });\n    const mergedInnerMarkup = innerMarkup.join('');\n    return `<div class=\"best-sellers__container\">\n              <p class=\"best-sellers__categori\"> ${obj.list_name}</p>\n              <ul class=\"best-sellers__list\">\n              ${mergedInnerMarkup}\n              </ul>\n              <div class=\"button-conteiner\">\n              <button class=\"best-sellers-button\" data-category=\"${obj.list_name}\">see more</button>\n              </div>\n            </div>`;\n  });\n  const finalMarkup = renderedItems.join('');\n  return finalMarkup;\n}\n","let changeThemeButtons = document.querySelectorAll('.changeTheme'); \n\nchangeThemeButtons.forEach(button => {\n    button.addEventListener('click', function () { \n        let theme = this.dataset.theme; \n        applyTheme(theme); \n    });\n});\n\n\nfunction applyTheme(themeName) {\n    document.querySelector('[title=\"theme\"]').setAttribute('href', `sass/utils/_theme-${themeName}.scss`);\n    changeThemeButtons.forEach(button => {\n        button.style.display = 'block';\n    });\n    document.querySelector(`[data-theme=\"${themeName}\"]`).style.display = 'none';\n    localStorage.setItem('theme', themeName);\n}\n\nlet activeTheme = localStorage.getItem('theme'); \n\nif(activeTheme === null || activeTheme === 'light') { \n    applyTheme('light');\n} else if (activeTheme === 'dark') { \n    applyTheme('dark');\n}"],"names":["parcelRequire","$8aad853c076397e7$var$refs","openBurgerBtn","document","querySelector","closeBurgerBtn","burger","$8aad853c076397e7$var$toggleModal","classList","toggle","$8aad853c076397e7$var$setTheme","theme","documentElement","setAttribute","localStorage","setItem","querySelectorAll","forEach","toggleSwitch","checked","addEventListener","$8aad853c076397e7$var$currentTheme","getItem","e","target","$615fE","$d5fa13485dd33184$var$list","$d5fa13485dd33184$var$categoryTitle","$d5fa13485dd33184$var$listCategory","$d5fa13485dd33184$var$allBooks","$d5fa13485dd33184$var$allBooksTitle","$d5fa13485dd33184$var$categoryBooks","category","title","wordArray","split","lastWord","length","firstTitle","slice","join","innerHTML","$d5fa13485dd33184$var$titleMarkup","getBookByCategory","then","arr","map","book_image","author","_id","evt","nodeName","textContent","preventDefault","className","dataset","$9ab3057244f938b0$var$listCategory","insertAdjacentHTML","async","categoryList","getCategoriesList","categoryArr","list_name","push","markup","sort","a","b","localeCompare","item","$9ab3057244f938b0$var$getMarkupCategoryList","$ba113c1c013b7caa$var$modalBackdropEl","$ba113c1c013b7caa$var$modalContainerEl","event","bookId","closest","id","description","mark","refs","closeModalBtn","body","onCloseModal","window","removeEventListener","inKeyDownEscModalClose","style","overflow","remove","onClickBackdropModalClose","currentTarget","KEY_CODE_ESCAPE","code","$ba113c1c013b7caa$var$createMarkupModal","getBookById","error","console","log","$e3f4d87703a0ba46$var$allBooks","$e3f4d87703a0ba46$var$bookSize","$e3f4d87703a0ba46$var$getBookSize","screenWidth","innerWidth","$e3f4d87703a0ba46$var$renderMarkup","data","obj","mergedInnerMarkup","books","book","getTopBooks","response","$8547458e5800e4ee$var$changeThemeButtons","$8547458e5800e4ee$var$applyTheme","themeName","button","display","this","$8547458e5800e4ee$var$activeTheme"],"version":3,"file":"index.b13b80ce.js.map"}